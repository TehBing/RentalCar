REATE OR REPLACE FUNCTION ListCustomerOrders(customerNumber IN NUMBER)
RETURN VARCHAR2 IS
    result VARCHAR2(4000);
BEGIN
	SELECT customer.c_custkey, customer.c_name || ':', LISTAGG(orders.o_orderkey, ', ') WITHIN GROUP (ORDER BY orders.o_orderkey) AS OrderList
	INTO result
	FROM customer
	left join orders on customer.c_custkey = orders.o_custkey
	where customer.c_custkey = customerNumber
	group by customer.c_custkey, customer.c_name;
	return result;

END ListCustomerOrders;
/
